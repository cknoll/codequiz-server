<!-- content of one single task  -->

{# javascripts required by SliderVoteForm #}

<h2>Task-Meta-Infos</h2>
{% if error_message %}
    <p><strong>{{ error_message }}</strong></p>
{% endif %}

{% load ratings_tags %}
{% get_rating_form for task using 'difficulty' as rating_form_difficulty %}
{% get_rating_form for task using 'quality' as rating_form_quality %}
{% get_rating_score for task using 'difficulty' as score_difficulty %}
{% get_rating_score for task using 'quality' as score_quality %}


<div class="container">
    <div class="row">
        <div class="left">
            <p>Title:</p>
        </div>
        <div class="right"> {{ task.title }} </div>
    </div>
    <div class="row">
        <div class="left">
            <p>ID:</p>
        </div>
        <div class="right"> {{ task.id }} </div>
    </div>
    <div class="row">
        <div class="left">
            <p>Author:</p>
        </div>
        <div class="right"> {{ task.author }} </div>
    </div>
    <div class="row">
        <div class="left">
            <p>Version:</p>
        </div>
        <div class="right"> {{ task.versionstring }} </div>
    </div>
    <div class="row">
        <div class="left">
            <p>Quality:</p>
        </div>
        <div class="right">
            <form id="qualityratingform" action="{% url "ratings_vote" %}" class="ratings" method="post">
                {% csrf_token %}
                {{ rating_form_quality }}
                {{ score_quality.average }} ({{ score_quality.num_votes }})
                <span class="success" style="display: none;"></span>
                <span class="error" style="display: none;">Errors...</span>
            </form>
        </div>
    </div>
    <div class="row">
        <div class="left">
            <p>Difficulty:</p>
        </div>
        <div class="right">
            <form id="difficultyratingform" action="{% url "ratings_vote" %}" class="ratings" method="post">
                {% csrf_token %}
                {{ rating_form_difficulty }}
                {{ score_difficulty.average }} ({{ score_difficulty.num_votes }})
                <span class="success" style="display: none;"></span>
                <span class="error" style="display: none;">Errors...</span>
            </form>
        </div>
    </div>
</div>

<script type="text/javascript" charset="utf-8">

    $("#difficultyratingform").on("vote_submit", function (data) {
        alert("Difficulty: " + data["result"]);
    });

    $("#qualityratingform").on("vote_submit", function (data) {
        alert("Quality: " + data["result"]);
    });

</script>

